# 任务2

**负载的读写请求数随时间变化示意图（画图显示结果，参考示列2）**

ssdtrace-00

read

![image-20240523224722328](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523224722328.png)

ssdtrace-01

read

![image-20240523224042431](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523224042431.png)

write

![image-20240523215107704](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523215107704.png)

ssdtrace-02

read

![image-20240523224404431](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523224404431.png)

write

![image-20240523220305220](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523220305220.png)

ssdtrace-02



write

![image-20240523221156877](C:\Users\CC507\AppData\Roaming\Typora\typora-user-images\image-20240523221156877.png)

代码：

```python
import numpy as np
import matplotlib.pyplot as plt

# 读取数据文件
data_file = open('C:\\Users\\CC507\\Desktop\\Share\\ssdtrace-00', 'r')

# 初始化计数器
count = np.zeros(4000)
time_range = np.arange(0, 4000, 1)
min = 3500
max = 0

# 处理数据
for line in data_file:
    fields = line.split()
    timestamp = float(fields[3])
    operation_type = fields[6]
    # 判断读写类型，并根据时间戳确定时间范围
    if operation_type == 'R':
        index = int(timestamp)
        if index > max:
            max = index
        if index < min:
            min = index
        count[index] += 1

# 绘制柱状图
plt.bar(time_range, count, width=1, color='green', label='Reads', bottom=0)
# plt.bar(time_range+0.5, write_count, width=0.5, color='red', label='Writes', bottom=0)
plt.xlabel('Response Time')
plt.ylabel('Request Count')
plt.title('Number of reads per second')
plt.legend()
plt.ylim(0, 120000)
plt.xlim(min, max)
plt.show()

```

